<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<meta http-equiv="Content-Type" content="<?php echo $this->getContentType() ?>" />
<title><?php echo $this->getTitle() ?></title>
<meta name="description" content="<?php echo htmlspecialchars($this->getDescription()) ?>" />
<!--<meta name="keywords" content="<?php //echo htmlspecialchars($this->getKeywords()) ?>" />-->
<meta name="robots" content="<?php echo htmlspecialchars($this->getRobots()) ?>" />
<link rel="icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />
<link rel="shortcut icon" href="<?php echo $this->getFaviconFile(); ?>" type="image/x-icon" />

<link href="<?php echo $this->getSkinUrl('images/device/apple-touch-icon.png');?>" rel="apple-touch-icon"/>
<link href="<?php echo $this->getSkinUrl('images/device/apple-touch-icon-76x76.png');?>" rel="apple-touch-icon" sizes="76x76"/>
<link href="<?php echo $this->getSkinUrl('images/device/apple-touch-icon-120x120.png');?>" rel="apple-touch-icon" sizes="120x120"/>
<link href="<?php echo $this->getSkinUrl('images/device/apple-touch-icon-152x152.png');?>" rel="apple-touch-icon" sizes="152x152"/>
<link href="<?php echo $this->getSkinUrl('images/device/apple-touch-icon-180x180.png');?>" rel="apple-touch-icon" sizes="180x180"/>
<link href="<?php echo $this->getSkinUrl('images/device/icon-hires.png');?>" rel="icon" sizes="192x192"/>
<link href="<?php echo $this->getSkinUrl('images/device/icon-normal.png');?>" rel="icon" sizes="128x128"/>

<style>
#preloader {
  position: fixed;
  left: 0;
  top: 0;
      z-index: 10005;
    width: 100%;
    height: 100%;
    overflow: visible;
    background: #fff url('<?php echo $this->getSkinUrl('images/mgm_home_load.gif');?>') no-repeat center center;
}
@media all and (max-width: 480px){
	#preloader {background-size:105px;}
}
</style>

<!--[if lt IE 7]>
<script type="text/javascript">
//<![CDATA[
    var BLANK_URL = '<?php echo $this->helper('core/js')->getJsUrl('blank.html') ?>';
    var BLANK_IMG = '<?php echo $this->helper('core/js')->getJsUrl('spacer.gif') ?>';
//]]>
</script>
<![endif]-->

<?php /* Open Graph Protocol for Facebook and SEO START */ ?>
<?php if(Mage::registry('current_product')): ?>
 <?php $product = Mage::registry('current_product'); ?>
 <meta property="og:title" content="<?php echo ($product->getName()); ?>" />
 <meta property="og:type" content="product" />
 <meta property="og:image" content="<?php echo $this->helper('catalog/image')->init($product, 'small_image')->resize(200,200);?>" />
 <meta property="og:url" content="<?php echo Mage::registry('product')->getProductUrl(); ?>" />
 <meta property="og:description" content="<?php echo strip_tags(($product->getShortDescription())); ?>" />
 <meta property="og:site_name" content="<?php echo Mage::app()->getStore()->getName(); ?>" />
<?php elseif(Mage::registry('current_category')): ?>
 <meta property="og:title" content="<?php echo $this->getTitle() ?>" />
 <meta property="og:type" content="product.group" />
 <meta property="og:url" content="<?php echo $this->helper('core/url')->getCurrentUrl();?>" />
 <meta property="og:description" content="<?php echo strip_tags("Mapmygenome is a molecular diagnostics company for people proactive about their health. Our products provide insights into the genetic basis about ourselves that include traits, drug responses, inherited conditions and diseases.") ?>" />
 <meta property="og:site_name" content="<?php echo Mage::app()->getStore()->getName(); ?>" />
  <meta property="og:image" content="<?php echo $this->getUrl('').'mapmygenome_share.png'?>"/>
<?php elseif((Mage::getSingleton('cms/page')->getIdentifier() == 'home' &&
 Mage::app()->getFrontController()->getRequest()->getRouteName() == 'cms')) : ?>
 <meta property="og:title" content="<?php echo $this->getTitle() ?>" />
 <meta property="og:type" content="website" />
 <meta property="og:url" content="<?php echo $this->helper('core/url')->getCurrentUrl();?>" />
 <meta property="og:description" content="<?php echo strip_tags("Mapmygenome is a molecular diagnostics company for people proactive about their health. Our products provide insights into the genetic basis about ourselves that include traits, drug responses, inherited conditions and diseases.") ?>" />
 <meta property="og:site_name" content="<?php echo Mage::app()->getStore()->getName(); ?>" />
 <meta property="og:image" content="<?php echo $this->getUrl('').'mapmygenome_share.png'?>"/>
<?php else: ?>
 <meta property="og:title" content="<?php echo $this->getTitle() ?>" />
 <meta property="og:type" content="article" />
 <meta property="og:url" content="<?php echo $this->helper('core/url')->getCurrentUrl();?>" />
 <meta property="og:description" content="<?php echo strip_tags("Mapmygenome is a molecular diagnostics company for people proactive about their health. Our products provide insights into the genetic basis about ourselves that include traits, drug responses, inherited conditions and diseases.") ?>" />
 <meta property="og:site_name" content="<?php echo Mage::app()->getStore()->getName(); ?>" />
  <meta property="og:image" content="<?php echo $this->getUrl('').'mapmygenome_share.png'?>"/>
<?php endif; ?>
<?php /* Open Graph Protocol for Facebook and SEO END */ ?>

<?php echo $this->getCssJsHtml() ?>
<?php echo $this->getChildHtml() ?>
<?php echo $this->helper('core/js')->getTranslatorScript() ?>
<?php echo $this->getIncludes() ?>
<?php
	$currentUrl = Mage::helper('core/url')->getCurrentUrl();
	?>
	<script type="text/javascript">
		var parenturl = '<?php echo $currentUrl?>';
		var baseurl = '<?php echo $_SERVER['SERVER_NAME']?>';
		var facebook_custom_audience = false;
        var is_mobile = false;
                <?php
$isMobile = Zend_Http_UserAgent_Mobile::match(Mage::helper('core/http')->getHttpUserAgent(), $_SERVER);
 
if ($isMobile) {
    ?>
        is_mobile = true;
    <?php
}
?>
	</script>
<?php if (Mage::getStoreConfig('mapmygenomie_pixel/facebookcustomaudience/enable', Mage::app()->getStore()) == 1) { ?>

    <script type="text/javascript">
        facebook_custom_audience = true;
        !function (f, b, e, v, n, t, s) {
            if (f.fbq)
                return;
            n = f.fbq = function () {
                n.callMethod ?
                        n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq)
                f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = '2.0';
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window,
                document, 'script', '//connect.facebook.net/en_US/fbevents.js');

        fbq('init', '<?php echo Mage::getStoreConfig('mapmygenomie_pixel/facebookcustomaudience/fb_custom_audience_id') ?>');
        fbq('track', 'PageView');
    </script>
    <noscript>
    <img height="1" width="1" style="display:none"
         src="https://www.facebook.com/tr?id=<?php echo Mage::getStoreConfig('mapmygenomie_pixel/facebookcustomaudience/fb_custom_audience_id') ?>&ev=PageView&noscript=1"
         />
    </noscript>
<?php } ?>
<script>
  (function() {
    var cx = '001226131147529131217:jj0_5c1v3ea';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
